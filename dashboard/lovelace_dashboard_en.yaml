title: Haptique Manager
icon: mdi:remote
theme: default
views:
  - type: sections
    max_columns: 4
    dense_section_placement: true
    path: ''
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: markdown
                content: >
                  ### üìã Learning Instructions

                  1. **Fill out the form above** with the device and command
                  information

                  2. **Click "Learn"** - learning mode will be automatically
                  activated

                  3. **Point your remote control** at the IR sensor

                  4. **Press the button** on the remote control

                  5. **The command will be saved** automatically to the database
                     
                  **üí° Note:** Device lists update automatically after each
                  learning session!
              - type: entities
                title: üéì Learn an IR Command
                entities:
                  - entity: input_text.haptique_new_device_name
                    name: Device Name
                    icon: mdi:devices
                  - entity: input_text.haptique_new_command_name
                    name: Command Name
                    icon: mdi:identifier
                show_header_toggle: false
              - type: horizontal-stack
                cards:
                  - show_name: true
                    show_icon: true
                    type: button
                    name: Learn
                    icon: mdi:school
                    tap_action:
                      action: call-service
                      service: script.haptique_learn_from_helpers
                    hold_action:
                      action: none
                    icon_height: 50px
                  - show_name: true
                    show_icon: true
                    type: button
                    name: Clear
                    icon: mdi:eraser
                    tap_action:
                      action: call-service
                      service: script.haptique_clear_helpers
                    hold_action:
                      action: none
                    icon_height: 50px
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: markdown
                content: |
                  ### üìã Sending Instructions

                  1. **Select a Device** from the dropdown list
                  2. **Select a command** (the list updates automatically)
                  3. **Click "Send"** to transmit the IR code

                  **üîÑ Automatic Refresh:**
                  - Commands update automatically when you change Device
                  - Lists refresh on Home Assistant startup
                  - Manual button available if needed
              - type: entities
                title: üì§ Send an IR Command
                entities:
                  - entity: input_select.haptique_replay_device
                    name: Select a Device
                    icon: mdi:devices
                  - entity: input_select.haptique_replay_command
                    name: Select a Command
                    icon: mdi:gesture-tap-button
                show_header_toggle: false
              - type: horizontal-stack
                cards:
                  - show_name: true
                    show_icon: true
                    type: button
                    name: Send
                    icon: mdi:send
                    tap_action:
                      action: call-service
                      service: script.haptique_send_from_selectors
                    hold_action:
                      action: none
                    icon_height: 50px
          - type: horizontal-stack
            cards:
              - show_name: true
                show_icon: true
                type: button
                name: üîÑ Refresh device list
                icon: mdi:refresh
                tap_action:
                  action: call-service
                  service: script.haptique_update_device_list
                hold_action:
                  action: none
                icon_height: 50px
      - type: grid
        cards:
          - type: entities
            title: üìä Last learned IR code
            entities:
              - entity: sensor.haptique_extender_last_learn_ir_code
                name: Timestamp
              - type: attribute
                entity: sensor.haptique_extender_last_learn_ir_code
                attribute: count
                name: Number of values
              - type: attribute
                entity: sensor.haptique_extender_last_learn_ir_code
                attribute: freq_khz
                name: Frequency (kHz)
              - type: attribute
                entity: sensor.haptique_extender_last_learn_ir_code
                attribute: frames
                name: Frames
              - type: attribute
                entity: sensor.haptique_extender_last_learn_ir_code
                attribute: raw_data
                name: IR Code
            show_header_toggle: false
            grid_options:
              columns: full
              rows: 8
        column_span: 2
    badges: []
    title: Learning
    icon: mdi:school
    cards: []
  - type: sections
    max_columns: 4
    title: Database Management
    path: database
    sections:
      - type: grid
        cards:
          - type: heading
            heading: üìã List Devices
            heading_style: title
          - type: vertical-stack
            cards:
              - show_name: true
                show_icon: true
                type: button
                name: üìã List All Devices
                icon: mdi:view-list
                tap_action:
                  action: call-service
                  service: script.haptique_list_all_devices
                hold_action:
                  action: none
                icon_height: 50px
              - type: markdown
                content: >
                  **üí° Note:** Displays the complete list of all devices in a
                  notification.
                text_only: true
            grid_options:
              rows: 4
              columns: full
          - show_name: true
            show_icon: true
            type: button
            name: üîÑ Refresh all lists
            icon: mdi:refresh-auto
            tap_action:
              action: call-service
              service: script.haptique_update_all_services_lists
            hold_action:
              action: none
            show_state: false
            grid_options:
              columns: full
              rows: 2
        column_span: 1
      - type: grid
        cards:
          - type: heading
            heading: üìã List Commands for a Device
            heading_style: title
          - type: vertical-stack
            cards:
              - type: entities
                entities:
                  - entity: input_select.haptique_services_device
                    name: Select a Device
                    icon: mdi:database
                show_header_toggle: false
                state_color: true
              - show_name: true
                show_icon: true
                type: button
                name: List Commands
                icon: mdi:format-list-bulleted
                tap_action:
                  action: call-service
                  service: script.haptique_list_commands_from_services
                hold_action:
                  action: none
                icon_height: 50px
              - type: markdown
                content: >
                  **üí° Note:** Select a device from the list, then click to see
                  all its commands in a notification.
                title: üìã List Commands for a Device
                text_only: true
            grid_options:
              columns: full
              rows: 7
      - type: grid
        cards:
          - type: heading
            heading: üóëÔ∏è Delete a Device
            heading_style: title
          - type: vertical-stack
            cards:
              - type: entities
                entities:
                  - entity: input_select.haptique_delete_device_selector
                    name: Select a Device
                    icon: mdi:delete-forever
                show_header_toggle: false
              - type: button
                name: Delete Device
                icon: mdi:delete-forever
                icon_height: 50px
                tap_action:
                  action: call-service
                  service: script.haptique_delete_device_from_services
                hold_action:
                  action: none
                confirmation:
                  text: >-
                    ‚ö†Ô∏è Are you sure you want to delete this device AND ALL its
                    commands?
              - type: markdown
                content: >
                  **‚ö†Ô∏è WARNING:** This action deletes the Device AND all its
                  commands!
                text_only: true
            grid_options:
              columns: full
              rows: 7
      - type: grid
        cards:
          - type: heading
            heading: üóëÔ∏è Delete a Command
            heading_style: title
          - type: vertical-stack
            cards:
              - type: entities
                entities:
                  - entity: input_select.haptique_services_device
                    name: Select a Device
                    icon: mdi:database
                  - entity: input_select.haptique_services_command
                    name: Select a Command
                    icon: mdi:code-braces
                show_header_toggle: false
              - type: button
                name: Delete Command
                icon: mdi:delete
                tap_action:
                  action: call-service
                  service: script.haptique_delete_command_from_services
                hold_action:
                  action: none
                icon_height: 50px
                confirmation:
                  text: Are you sure you want to delete this command?
              - type: markdown
                content: >
                  **üí° Note:** Select a device, select a command, then click
                  delete command
                text_only: true
            grid_options:
              columns: full
              rows: auto
        column_span: 1
    header:
      card:
        type: markdown
        text_only: true
        content: |-
          # Database Management
          Physical Database Path: **/config/haptique_ir_devices.json**
      layout: center
      badges_position: bottom
      badges_wrap: wrap
    icon: mdi:database-cog-outline
    cards: []
    theme: Material You Dark
    dense_section_placement: false
    background:
      opacity: 20
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
    top_margin: false
  - type: sections
    max_columns: 2
    title: Sensors
    path: sensors
    icon: mdi:monitor-eye
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: entity
                entity: binary_sensor.haptique_extender_wifi_connected
              - type: entity
                entity: sensor.haptique_extender_wifi_signal
              - type: entity
                entity: sensor.haptique_extender_wifi_ssid
              - type: entity
                entity: sensor.haptique_extender_wifi_ip
              - type: entity
                entity: sensor.haptique_extender_mac_address
              - type: entity
                entity: sensor.haptique_extender_firmware_version
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: entity
                entity: sensor.haptique_extender_last_learn_ir_code
              - type: entity
                entity: sensor.haptique_extender_learning_mode
              - type: entity
                entity: sensor.haptique_extender_ir_last_frequency
              - type: entity
                entity: sensor.haptique_extender_ir_rx_count
              - type: entity
                entity: sensor.haptique_extender_ir_storage_max
              - type: entity
                entity: sensor.haptique_extender_ir_storage_usage
              - type: entity
                entity: sensor.haptique_extender_ir_commands_stored
  - title: Help
    icon: mdi:help-circle
    path: help
    badges: []
    cards:
      - type: markdown
        title: üìã IR Service Usage Examples
        content: |
          ### üéì Learn an IR Command

          ```yaml
          service: haptique_extender.learn_ir_command
          data:
            device_name: "Samsung TV Living Room"
            command_name: power
            timeout: 30
          ```

          ---

          ### üì§ Send an IR Command

          ```yaml
          service: haptique_extender.send_ir_command
          data:
            device_name: "Samsung TV Living Room"
            command_name: power
          ```

          ---

          ### üìã List Devices

          ```yaml
          service: haptique_extender.list_ir_devices
          response_variable: devices
          ```

          ---

          ### üìã List Commands for a Device

          ```yaml
          service: haptique_extender.list_ir_commands
          data:
            device_name: "Samsung TV Living Room"
          response_variable: commands
          ```

          ---

          ### üóëÔ∏è Delete a Command

          ```yaml
          service: haptique_extender.delete_ir_command
          data:
            device_name: "Samsung TV Living Room"
            command_name: power
          ```

          ---

          ### üóëÔ∏è Delete a Device

          ```yaml
          service: haptique_extender.delete_ir_device
          data:
            device_name: "Samsung TV Living Room"
          ```
      - type: markdown
        title: üíæ IR Database
        content: |+
          ### File Location

          ```
          /config/haptique_ir_devices.json
          ```
          ### Remember to make regular backups of the file!!



          ### Automatic Refresh

          Lists refresh automatically:
          - ‚úÖ On Home Assistant startup
          - ‚úÖ After learning a command
          - ‚úÖ When changing selected device
          - ‚úÖ After deletion



    type: masonry
    theme: Material You Dark
